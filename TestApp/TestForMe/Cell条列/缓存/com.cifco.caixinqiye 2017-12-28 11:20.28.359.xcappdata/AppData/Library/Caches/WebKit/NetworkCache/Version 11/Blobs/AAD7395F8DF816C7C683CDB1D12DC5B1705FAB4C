function Token(){this.GET_TYPE="",this.PROD_CODE="",this.INDEX_CODE="",this.CANDLE_PERIOD="",this.FIELDS="",this.CANDLE_MODE="",this.SEARCH_DIRECTION="",this.START_DATE="",this.DATA_COUNT="",this.TIMES="",this.SELECTED_KLINE="",this.PAGE_NO="",this.ID="",this.NODE_TYPE="",this.init=function(e,t,a,o){this.GET_TYPE=e,this.PROD_CODE=t,this.CANDLE_PERIOD=a,this.FIELDS=o},this.init=function(e,t,a,o,n){this.GET_TYPE=e,this.PROD_CODE=t,this.CANDLE_PERIOD=a,this.FIELDS=o,this.SEARCH_DIRECTION=n},this.getToken=function(e){var t=null;return Light.ajax({url:gHttpUrl+e,data:{},type:"GET",async:!1,success:function(e){null!=e&&(e.indexOf("↵")&&(e=e.substring(0,e.length-1)),t=e)}}),t},this.getMoreDetailDatas=function(e){var t=null;return this.FIELDS=""!=this.FIELDS?this.FIELDS:"data_timestamp,shares_per_hand,bid_grp,offer_grp,preclose_px,open_px,high_px,low_px,last_px,business_balance,business_amount,amplitude,current_amount,business_amount_in,business_amount_out,entrust_rate,turnover_ratio,vol_ratio,up_px,down_px,dyn_pb_rate,pe_rate,prev_amount,market_value,prod_name,chi_spelling_grp,trade_status,px_change,px_change_rate,circulation_value",Light.ajax({url:"https://open.hscloud.cn/quote/v1/real",data:{en_prod_code:this.PROD_CODE,fields:this.FIELDS},type:"GET",async:!1,dataType:"json",headers:{Authorization:"bearer "+e,"Content-Type":"application/x-www-form-urlencoded"},success:function(e){t=e},error:function(e,t,a){}}),t},this.getNxzlbDetail=function(e){var t=null;return Light.ajax({url:"https://open.hscloud.cn/info/v3/"+this.NODE_TYPE,data:{page_no:this.PAGE_NO},type:"GET",async:!1,headers:{Authorization:"bearer "+e,"Content-Type":"application/x-www-form-urlencoded"},dataType:"json",success:function(e){t=e},error:function(e,t,a){console.log(a)}}),t},this.getNxzlbContentDetail=function(e){var t=null;return Light.ajax({url:"https://open.hscloud.cn/info/v3/bbtroom_article_info",data:{id:this.ID},type:"GET",async:!1,headers:{Authorization:"bearer "+e,"Content-Type":"application/x-www-form-urlencoded"},dataType:"json",success:function(e){t=e},error:function(e,t,a){console.log(a)}}),t},this.getMoreCodeSortDatas=function(e){var t=null;return this.FIELDS=""!=this.FIELDS?this.FIELDS:"last_px,px_change_rate",Light.ajax({url:"https://open.hscloud.cn/quote/v1/sort",data:{en_prod_code:this.PROD_CODE,fields:this.FIELDS,data_count:"4000",sort_field_name:"px_change_rate",sort_type:"1"},type:"post",async:!1,headers:{Authorization:"bearer "+e,"Content-Type":"application/x-www-form-urlencoded"},dataType:"json",success:function(e){t=e},error:function(e,t,a){console.log("fail")}}),t},this.getFundflowOrderRankDatas=function(e,t){var a=20;null!=t&&void 0!=t&&(a=t);var o=null;return this.FIELDS=""!=this.FIELDS?this.FIELDS:"main_net_turnover,turnover_in_count",Light.ajax({url:"https://open.hscloud.cn/quote/v2/fundflow_order_rank",data:{en_hq_type_code:"SS.ESA,SZ.ESA",fields:this.FIELDS,start_pos:0,data_count:a,sort_type:1,sort_field_name:"ext_data_main_net_in"},type:"get",dataType:"json",async:!1,headers:{Authorization:"bearer "+e,"Content-Type":"application/x-www-form-urlencoded"},success:function(e){o=e},error:function(e,t,a){console.log("fail")}}),o},this.getFundflowOrderCountDatas=function(e){var t=null;return this.FIELDS=""!=this.FIELDS?this.FIELDS:"turnover_in_count",Light.ajax({url:"https://open.hscloud.cn/quote/v2/fundflow_order_snapshot",data:{en_prod_code:"000002.XBHS,399106.XBHS",fields:this.FIELDS},type:"post",dataType:"json",async:!1,headers:{Authorization:"bearer "+e,"Content-Type":"application/x-www-form-urlencoded"},success:function(e){t=e},error:function(e,t,a){console.log("fail")}}),t},this.getAllSortedDatas=function(e,t,a,o){var n=null;return this.FIELDS=""!=this.FIELDS?this.FIELDS:"last_px,px_change_rate",Light.ajax({url:"https://open.hscloud.cn/quote/v1/sort",data:{en_hq_type_code:"SS.ESA,SZ.ESA",fields:"open_px,last_px,high_px,low_px,px_change_rate,vol_ratio,amplitude,turnover_ratio,trade_status,prod_name",data_count:e,sort_field_name:t,sort_type:a},type:"post",async:!1,headers:{Authorization:"bearer "+o,"Content-Type":"application/x-www-form-urlencoded"},dataType:"json",success:function(e){n=e},error:function(e,t,a){console.log("fail")}}),n},this.getMarketChgDiagramDatas=function(e){var t=null;return Light.ajax({url:"https://open.hscloud.cn/quote/v2/market_chg_diagram",data:{en_finance_mic:"XSHG,XSHE"},type:"get",async:!1,headers:{Authorization:"bearer "+e,"Content-Type":"application/x-www-form-urlencoded"},dataType:"json",success:function(e){t=e},error:function(e,t,a){console.log("fail")}}),t},this.getMarketExtInfoDatas=function(e){var t=null;return Light.ajax({url:"https://open.hscloud.cn/quote/v2/market_ext_info",data:{en_finance_mic:"XSHG,XSHE"},type:"get",async:!1,headers:{Authorization:"bearer "+e,"Content-Type":"application/x-www-form-urlencoded"},dataType:"json",success:function(e){t=e},error:function(e,t,a){console.log("fail")}}),t},this.getHotHYGNSortDatas=function(e,t,a,o,n){var r=null;return this.FIELDS=""!=this.FIELDS?this.FIELDS:"last_px,min5_chgpct,wavg_px,rise_count,fall_count,member_count,preclose_px,high_px,low_px,business_amount,rise_first_grp,fall_first_grp,business_balance,open_px,data_timestamp,px_change,px_change_rate,trade_mins,prod_name",Light.ajax({url:"https://open.hscloud.cn/quote/v1/sort",data:{en_hq_type_code:t,fields:this.FIELDS,data_count:a,sort_field_name:o,sort_type:n},type:"post",async:!1,headers:{Authorization:"bearer "+e,"Content-Type":"application/x-www-form-urlencoded"},dataType:"json",success:function(e){r=e},error:function(e,t,a){console.log("fail")}}),r},this.getCapitalflowsnapshotDatas=function(e){var t=null;return Light.ajax({url:"https://open.hscloud.cn/quote/v2/fundflow_order_snapshot",data:{en_prod_code:this.PROD_CODE},type:"get",async:!1,headers:{Authorization:"bearer "+e,"Content-Type":"application/x-www-form-urlencoded"},dataType:"json",success:function(e){t=e},error:function(e,t,a){console.log("fail")}}),t},this.getCapitalflowdayDatas=function(e){var t=null;return Light.ajax({url:"https://open.hscloud.cn/quote/v2/fundflow_day",data:{prod_code:this.PROD_CODE,get_type:"offset",data_count:5},type:"get",async:!1,headers:{Authorization:"bearer "+e,"Content-Type":"application/x-www-form-urlencoded"},dataType:"json",success:function(e){t=e},error:function(e,t,a){console.log("fail")}}),t},this.getIndustryCodeStrByName=function(e,t){var a="";return Light.ajax({url:"https://open.hscloud.cn/quote/v1/market/detail",data:{finance_mic:"XBHS"},type:"get",async:!1,headers:{Authorization:"bearer "+e,"Content-Type":"application/x-www-form-urlencoded"},dataType:"json",success:function(e){for(var o=0;o<t.length;o++)for(var n=0;n<e.data.market_detail_prod_grp.length;n++)if(e.data.market_detail_prod_grp[n].prod_name==t[o]){a=a+e.data.market_detail_prod_grp[n].prod_code+".XBHS,";break}},error:function(e,t,a){console.log("fail")}}),a}}function getNxzlbContentData(e){var t=new Token,a=t.getToken("NXZLB_Token_KEY_STR");return null!=e&&""!=e&&(t.ID=e,data=t.getNxzlbContentDetail(a)),null==data?(console.log("仍然没有数据...."),null):data}function getNxzlbData(e,t){var a={1:"bbtroom_main_track",2:"bbtroom_trade_book",3:"bbtroom_multitray_book"},o=new Token,n=o.getToken("NXZLB_Token_KEY_STR");return null!=e&&""!=e&&(o.NODE_TYPE=a[e],o.PAGE_NO=t,data=o.getNxzlbDetail(n)),null==data?(console.log("仍然没有数据...."),null):data}function getQuoteValues(e){var t=new Token,a=t.getToken("NXZLB_Token_KEY_STR"),o=null;if(null!=e&&e.length>1&&(t.PROD_CODE=e,o=t.getMoreDetailDatas(a)),null==o)return console.log("仍然没有数据...."),null;var n=[];n=e.split(",");for(var r=null,s={},l=0;l<n.length;l++){var u={};r=o.data.snapshot[n[l]];var i=o.data.snapshot.fields;if(null!=r){for(var d=0;d<r.length;d++)u[i[d]]=r[d];s[n[l]]=u}}return s}function getQuoteSortValues(e){var t=new Token,a=t.getToken("NXZLB_Token_KEY_STR"),o=null;if(null!=e&&e.length>1&&(t.PROD_CODE=e,o=t.getMoreCodeSortDatas(a)),null==o)return console.log("仍然没有数据...."),null;var n=[];n=e.split(",");for(var r,s={},l=0;l<n.length;l++){var u={};r=o.data.sort[n[l]];var i=o.data.sort.fields;if(null!=r){for(var d=0;d<r.length;d++)u[i[d]]=r[d];s[n[l]]=u}}return s}function getTopRnakNumValues(e,t,a){var o=new Token,n=o.getToken("NXZLB_Token_KEY_STR");if(data=o.getAllSortedDatas(e,t,a,n),null==data)return console.log("仍然没有数据...."),null;var r,s=[],l={};for(var u in data.data.sort)s.push(u);for(var i=0;i<s.length;i++){var d={};r=data.data.sort[s[i]];var c=data.data.sort.fields;if(null!=r){for(var p=0;p<r.length;p++)d[c[p]]=r[p];l[s[i]]=d}}return l}function getMarketChgDiagramValues(){var e=new Token,t=e.getToken("NXZLB_Token_KEY_STR");return data=e.getMarketChgDiagramDatas(t),null==data?(console.log("仍然没有数据...."),null):data}function getMarketExtInfoValues(){var e=new Token,t=e.getToken("NXZLB_Token_KEY_STR");return data=e.getMarketExtInfoDatas(t),null==data?(console.log("仍然没有数据...."),null):data}function getHottoSecuDatas(e,t,a,o){var n=new Token,r=n.getToken("NXZLB_Token_KEY_STR");if(data=n.getHotHYGNSortDatas(r,e,t,a,o),null==data)return console.log("仍然没有数据...."),null;var s={},l=data.data.sort,u=data.data.sort.fields;for(var i in l){var d={};if("fields"!=i){for(var c=l[i],p=0;p<c.length;p++)d[u[p]]=c[p];s[i]=d}}return s}function secuCodetoMarket(e,t){var a="",o="",n=e.split("."),r=n[0];if(5==r.length)o=e,a="hkStock";else if(1==n.length)if(a="stock",null!=t&&""!=t)83==t?o=r+".SS":90==t&&(o=r+".SZ");else if(null!=r&&""!=r){var s=r.substring(0,1);o="6"==s||"9"==s?r+".SS":r+".SZ"}return recordEventHandle("quoteClick_eventId",null,null,null,null,a,r),o}function marketQuote(secuCode,secuMarket,secuAbbr,listedsector){var adjustCode=secuCodetoMarket(secuCode,secuMarket),m3Market=secuCodetoMarket(secuCode,secuMarket,"M3");if("hsjy_1055"==gProductName||"HSJY_1055"==gProductName){eval(function(e,t,a,o,n,r){if(n=function(e){return(e<62?"":n(parseInt(e/62)))+((e%=62)>35?String.fromCharCode(e+29):e.toString(36))},!"".replace(/^/,String)){for(;a--;)r[n(a)]=o[a]||n(a);o=[function(e){return r[e]}],n=function(){return"\\w+"},a=1}for(;a--;)o[a]&&(e=e.replace(new RegExp("\\b"+n(a)+"\\b","g"),o[a]));return e}('8 z(){5 u=f.1c;5 a={1z:/g/i.0(u)||/l.*g/i.0(u)||(/t|v|B|C|D|F|H|I|J|K|L|M|O|Q|T-|n|o|p-|q|r/.0(u)),16:!(/g/i.0(u)||/l.*g/i.0(u)||(/t|v|B|C|D|F|H|I|J|K|L|M|O|Q|T-|n|o|p-|q|r/.0(u))),Y:u.2(\'1l\')>-1,w:!!u.17(/\\(i[^;]+;( U;)? 19.+1a 1b X/),x:u.2(\'x\')>-1,y:u.2(\'y\')>-1,1e:u.2(\'1f\')>-1,1g:u.2(\'1h\')>-1,1i:u.2(\'l\')>-1,1j:u.2(\'1G\')>-1&&u.2(\'1q\')==-1,A:(f.1A||f.A).1B(),1C:f.1E,Z:/10/i.0(u),11:/12|13/i.0(u),14:/15/i.0(u)};4.m=a}z();8 18(a){5 b;E{a=a||{};9.G("d调用原生入参："+(k(a)==="h"?a:3.7(a)));j(4.m.Y){b=4.N.6(3.7(a));j(k(b)=="h"){b=3.P(b)}}1k j(4.m.w){5 c=1m 1n();c.1o("1p",4.R.1r+"//"+4.R.1s+"//1t-1u://N:6:"+1v(3.7(a)),1w);c.1x("");b=3.P(c.1y)}}S(e){9.V("d调用原生6方法出错："+e.W)}1D b?b:{}}8 6(a){5 b=s;5 c=s;a=a||{};9.G("原生调用d入参："+(k(a)==="h"?a:3.7(a)));E{1F("8"+a.1d+"("+3.7(a)+")")}S(e){9.V("原生调用d的6方法出错："+e.W)}};',0,105,"test||indexOf|JSON|window|var|callMessage|stringify|function|console||||H5||navigator|Mobile|string||if|typeof|AppleWebKit|iBrowser|Nokia|SonyEricsson|SIE|Amoi|ZTE|null|MIDP||SymbianOS|ios|iPhone|iPad|_setBrowserInfo|language|NOKIA|SAMSUNG|LG|try|NEC|debug|TCL|Alcatel|BIRD|DBTEL|Dopod|PHILIPS|external|HAIER|parse|LENOVO|location|catch|MOT||log|message||android|weixin|MicroMessenger|uc|UCWEB|UcBrowser|qq|QQBrowser|pc|match|callMessageNative|CPU|Mac|OS|userAgent|funcNo|trident|Trident|presto|Presto|webKit|gecko|else|Android|new|XMLHttpRequest|open|GET|KHTML|protocol|host|js|invoke|encodeURIComponent|false|send|responseText|mobile|browserLanguage|toLowerCase|app|return|appVersion|eval|Gecko".split("|"),0,{}));var scode=adjustCode.split(".")[0],market=adjustCode.split(".")[1],type="";market="SS"==market?"SH":market,"SH"==market?type="9":"SZ"==market&&(type="0");var param={stockType:type,stockMarket:market,stockCode:scode,stockName:"",targetModule:"self-stock"};param.funcNo="60105",callMessageNative(param)}else if("hsjy_1073"==gProductName||"HSJY_1073"==gProductName){var scode=adjustCode.split(".")[0],market=adjustCode.split(".")[1];if(null!=listedsector&&void 0!=listedsector?6==listedsector?market="4621":2==listedsector?market="4614":1==listedsector&&(null!=secuMarket&&void 0!=secuMarket?83==secuMarket?market="4353":90==secuMarket&&(market="4609"):"SH"==market||"SS"==market?market="4353":"SZ"==market&&(market="4609")):"SH"==market||"SS"==market?market="4353":"SZ"==market&&(market="4609"),"HKM"==market?market="8451":"HKG"==market?market="8704":"HKI"==market&&(market="8960"),"undefined"!=typeof fastman){var uri_temp="dfyj20170811://dl/stockdetailpage?stockname="+secuAbbr+"&stockcode="+scode+"&stocktype="+market,isFromApp=fastman.isFromApp();isFromApp&&fastman.onNavigateNativeTo({url:uri_temp})}else{var new_element=document.createElement("script");new_element.setAttribute("type","text/javascript"),new_element.setAttribute("src","https://iwx1.dfzq.com.cn/open/dfzq-jsbridge-1.2.js"),document.body.appendChild(new_element);var uri_temp="dfyj20170811://dl/stockdetailpage?stockname="+secuAbbr+"&stockcode="+scode+"&stocktype="+market,interval=setInterval(function(){if("undefined"!=typeof fastman&&void 0!=typeof fastman){clearInterval(interval);fastman.isFromApp()&&(fastman.ready(function(){}),fastman.onNavigateNativeTo({url:uri_temp}))}})}}else if("hsjy_1027"==gProductName||"HSJY_1027"==gProductName){var quetoUrl="http%3a%2f%2faction%3a12051%2f%3fstockcode%3d%7bS3%7d",href=decodeURIComponent(quetoUrl);href=href.replace("{s1}",adjustCode).replace("{S1}",adjustCode),href=href.replace("{s3}",secuCode).replace("{S3}",secuCode).replace("{m3}",m3Market).replace("{M3}",m3Market),window.location.href=href}else if("hsjy_1083"==gProductName||"HSJY_1083"==gProductName){var scode=adjustCode.split(".")[0],market=adjustCode.split(".")[1];market="SS"==market?"SH":market;var contentJson={stockCode:scode+"."+market};if(/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent))console.log("ios"),window.webkit.messageHandlers.jsCallNative.postMessage({nativeCallJS:"gotoStockDetailPage",stockCode:scode+"."+market});else{var value=JSON.stringify(contentJson);window.haina.pushEvent('{"nativecalljs":"gotoStockDetailPage", "logicData":'+value+"}")}}else if("undefined"!=typeof TZYJegos){if("000001.SS"==adjustCode)adjustCode="000001.0x1100";else if("2A01.SZ"==adjustCode)adjustCode="2A01.0x1200";else if("399006.SZ"==adjustCode)adjustCode="399006.0x1200";else{var scode=adjustCode.split(".")[0],market=adjustCode.split(".")[1];"SH"==market||"SS"==market?market="0x1101":"SZ"==market?market="0x1201":"HKM"==market?market="0x2103":"HKG"==market?market="0x2200":"HKI"==martket?market="0x2300":"HK"==martket&&(market="0x2103"),adjustCode=scode+"."+market}TZYJegos.callquotation(adjustCode)}else if("undefined"!=typeof egos)egos.callquotation(adjustCode);else if(gLink&&null!=gLink){var href=decodeURIComponent(gLink);href=href.replace("{s1}",adjustCode).replace("{S1}",adjustCode),href=href.replace("{s3}",secuCode).replace("{S3}",secuCode).replace("{m3}",m3Market).replace("{M3}",m3Market),window.location.href=href}else{if(void 0!=gQuoteFlag&&0==gQuoteFlag)return;window.location.href=quoteUrl+"?s="+adjustCode+"&p="+gProductName}}function marketIndexQuote(e){adjustCode=e,"undefined"!=typeof egos?("hsjy_1003"!=gProductName&&"HSJY_1003"!=gProductName&&"hsjy_1015"!=gProductName&&"HSJY_1015"!=gProductName||"000001.SS"!=adjustCode&&"000001.SZ"!=adjustCode||(adjustCode="1A0001"),egos.callquotation(adjustCode)):gLink&&null!=gLink||(window.location.href=quoteUrl+"?s="+adjustCode+"&p="+gProductName)}function getFundflowOrderRankValues(){var e=new Token,t=e.getToken("NXZLB_Token_KEY_STR"),a=null;a=e.getFundflowOrderRankDatas(t);var o=null;o=e.getFundflowOrderCountDatas(t);var n=new Array;if(null==a)return console.log("仍然没有数据...."),null;if(null!=a){var r=0;if(null!=o)for(var s=o.data.fundflow_order_snapshot_grp,l=0;l<s.length;l++)r+=s[l].turnover_in_count;for(var u=a.data.data_count,i=a.data.fundflow_order_sort_grp,l=0;l<u;l++){var d,c={};c.ValueJlrSum=i[l].main_net_turnover/1e8,null!=i[l].prod_code&&(d=i[l].prod_code.split(".")[0]),"6"==d.substring(0,1)?(c.SecuCode=d+".SS",c.SecuMarket=83):(c.SecuCode=d+".SZ",c.SecuMarket=90),c.TotalNum=r,n.push(c)}}return n}function getFundflowOrderRankDetailValues(){var e=getFundflowOrderRankValues(),t="",a=new Object;if(null!=e&&""!=e){for(var o=0;o<e.length;o++)t+=e[o].SecuCode+",";if(""!=t&&(a=getQuoteValues(t)),null!=a)for(var o=0;o<e.length;o++){var n=e[o].SecuCode,r=a[n].business_balance/1e8,s=a[n].last_px,l=a[n].px_change_rate,u=a[n].prod_name;e[o].zcjb=0!=r?Number((e[o].ValueJlrSum/r*100).toFixed(2)):0,e[o].ClosePrice=s,e[o].ZDF=l,e[o].SecuAbbr=u}}return e}function getFundflowValues(e){var t=new Token,a=t.getToken("NXZLB_Token_KEY_STR"),o=null;o=t.getFundflowOrderRankDatas(a,e);new Array;return null==o?(console.log("仍然没有数据...."),null):o}function getCapitalflowsnapshot(e){var t=new Token,a=t.getToken("NXZLB_Token_KEY_STR"),o=secuCodetoMarket(e),n=null;null!=o&&o.length>1&&(t.PROD_CODE=o,n=t.getCapitalflowsnapshotDatas(a));new Array;return null==n?(console.log("仍然没有数据...."),null):n}function getCapitalflowday(e){var t=new Token,a=t.getToken("NXZLB_Token_KEY_STR"),o=secuCodetoMarket(e),n=null;null!=o&&o.length>1&&(t.PROD_CODE=o,n=t.getCapitalflowdayDatas(a));new Array;return null==n?(console.log("仍然没有数据...."),null):n}function getIndustryCodeStrByName(e){var t=new Token,a=t.getToken("NXZLB_Token_KEY_STR"),o=t.getIndustryCodeStrByName(a,e);return o.substring(0,o.length-1)}var gHttpUrl=gDataUrl+"?";